---
layout: null
---

{%- assign docindex = site.pages | concat: site.documents | where_exp:'doc','doc.include_on_search != false' -%}
{% assign maxwords = site.search.lunr_maxwords | default: "30"  %}

[
  {% for post in docindex %}
    {

      "title"    : "{% if post.title != "" %}{{ post.title | escape }}{% else %}{{ post.excerpt | strip_html |  escape | strip }}{%endif%}",
      "subtitle"    : "{{ post.subtitle | escape }}",
      "excerpt": {{ post.content | newline_to_br |
              replace:"<br />", " " |
              replace:"</p>", " " |
              replace:"</h1>", " " |
              replace:"</h2>", " " |
              replace:"</h3>", " " |
              replace:"</h4>", " " |
              replace:"</h5>", " " |
              replace:"</h6>", " "|
            strip_html | strip_newlines | truncatewords: maxwords | jsonify }},
      "url"      : "{{ post.url | absolute_url }}",
      "tag" : "{{ post.tags | join: ', '}}",
      "date"     : "{{ post.date | date: "%B %e, %Y" }}",
	  "img": {{ post.og_image | default: post.header_img | default: "" | absolute_url | jsonify }}
    } {% unless forloop.last %},{% endunless %}
  {% endfor %}
]